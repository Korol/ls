$(document).ready(function(){var e=10,t=1,n=1;$.News={Init:function(){this.InitActions(),this.InitDynamicData(),this.InitTemplate()},InitActions:function(){$(document).on("click",".action-remove-news",function(e){$.News.RemoveNewsRecord($(e.target).closest("button").attr("record"))}),$(document).on("click","#newsCategory input:radio",function(e){$.News.ReloadNewsList($(e.target).val())}),$(".assol-pagination-arrs .next").click(function(){$("#CurrentPage").val((parseInt($("#CurrentPage").val())||0)+1),$.News.ReloadNewsList()}),$(".assol-pagination-arrs .prev").click(function(){$("#CurrentPage").val((parseInt($("#CurrentPage").val())||0)-1),$.News.ReloadNewsList()}),$(document).on("keyup",".filter-input",function(e){delay(function(){$.News.ReloadNewsList()},500)})},InitDynamicData:function(){this.ReloadNewsList()},InitTemplate:function(){$("#newsTemplate").template("newsTemplate")},ReloadNewsList:function(e){e=e||$("#newsCategory input:radio:checked").val(),this.ReloadData("#news","newsTemplate",e)},ReloadData:function(a,s,o){function i(o){o.status?(o.records&&($(a).empty(),$.tmpl(s,o.records).appendTo(a)),t=Math.ceil(o.count/e),n=parseInt($("#CurrentPage").val())||1,n>t&&$("#CurrentPage").val(1),$("#CountPage").html(t)):showErrorAlert(o.message)}$(a).html("Загрузка данных..."),n=parseInt($("#CurrentPage").val())||0,n<1&&$("#CurrentPage").val(1),n>t&&$("#CurrentPage").val(t);var r={category:o||0,Limit:e,Offset:(($("#CurrentPage").val()||1)-1)*e},c=BaseUrl+"news/data";$.post(c,{data:r},i,"json")},RemoveNewsRecord:function(e){function t(e){e.status&&$.News.ReloadNewsList()}var n=BaseUrl+"news/"+e+"/remove";$.post(n,{},t,"json")}},$.News.Init()});