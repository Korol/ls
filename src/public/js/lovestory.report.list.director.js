$(document).ready(function(){"use strict";function e(){return N}function a(){var e=[{Level:r.Level,Name:r.Name},{Level:s.Level,Name:s.Name}];switch(p){case o.Level:e.push({Name:o.Name});break;case i.Level:e.push({Name:i.Name})}return e[e.length-1].IsLast=!0,e}function t(){var e=[{Level:v.Level,Name:v.Name}];switch(p){case L.Level:e.push({Name:L.Name,IsLast:!0});break;case m.Level:e.push({Name:m.Name,IsLast:!0});break;case c.Level:e.push({Name:c.Name,IsLast:!0});break;case n.Level:e.push({Name:n.Name,IsLast:!0})}return e}const l={Level:0},r={Level:1,Name:"Индивидуальные"},s={Level:2,Name:e},o={Level:21,Name:"Ежедневный отчет"},i={Level:22,Name:"Отчет по зарплате"},v={Level:3,Name:"Общие"},L={Level:31,Name:"Сводная зарплатная таблица"},n={Level:32,Name:"Общая з/п таблица"},c={Level:33,Name:"Общая таблица по сотрудникам"},m={Level:34,Name:"Сводная таблица распределения"};var p=l.Level,N="",d=0,u={main:{data:[{Level:r.Level,Name:r.Name.toUpperCase()},{Level:v.Level,Name:v.Name.toUpperCase()}]},general:{bread:[{Name:v.Name,IsLast:!0}],data:[{Level:c.Level,Name:c.Name,IsDoc:!0},{Level:L.Level,Name:L.Name,IsDoc:!0},{Level:n.Level,Name:n.Name,IsDoc:!0},{Level:m.Level,Name:m.Name,IsDoc:!0}]},individual:{bread:a,data:[{Level:o.Level,Name:o.Name,IsDoc:!0},{Level:i.Level,Name:i.Name,IsDoc:!0}]}};$.ReportListDirector={Init:function(){this.InitActions(),this.InitTemplate(),this.InitDynamicData()},InitActions:function(){$(document).on("click",".report-folder>a, .report-bread",function(e){var a=$(e.target).closest("[level]");if(p=parseInt(a.attr("level")),p==s.Level){var t=a.find(".folder-name").html();t&&(N=t);var l=a.attr("id-employee");l&&(d=l)}$.ReportListDirector.ReloadReportList()})},InitDynamicData:function(){this.ReloadReportList()},InitTemplate:function(){$("#reportsTemplate").template("reportsTemplate")},ReloadReportList:function(){function e(e){$("#reports").empty(),$.tmpl("reportsTemplate",e).appendTo("#reports")}function N(a){if(a.status){if(a.records){var t={bread:[{Level:r.Level,Name:r.Name,IsLast:!0}],data:a.records};e(t)}}else showErrorAlert(a.message)}switch($("#reports").html("Загрузка данных..."),p){case l.Level:e(u.main);break;case r.Level:$.post(BaseUrl+"reports/data",{},N,"json");break;case v.Level:e(u.general);break;case s.Level:e(u.individual);break;case o.Level:case i.Level:e({bread:a()});break;case L.Level:case m.Level:case c.Level:case n.Level:e({bread:t()});break;default:alert("Ошибка загрузки данных")}$.ReportListDirector.ShowReport(p)},ShowReport:function(e){switch($("#ReportIndividualDaily").toggle(e==o.Level),$("#ReportIndividualSalary").toggle(e==i.Level),$("#ReportOverallSalary").toggle(e==L.Level),$("#ReportOverallAllocation").toggle(e==m.Level),$("#ReportGeneralOfCustomers").toggle(e==c.Level),$("#ReportGeneralSalary").toggle(e==n.Level),e){case o.Level:$.ReportTranslate.setEmployee(d),$.ReportTranslate.ReloadReportMountMeta();break;case i.Level:$.ReportTranslate.setEmployee(d),$.ReportTranslate.ReloadReportSalary();break;case L.Level:$("#overlaySalarySite").find("input:first").click();break;case m.Level:$("#overallAllocationSite").find("input:first").click();break;case c.Level:$("#generalSite").find("input:first").click();break;case n.Level:$.ReportDirector.ReloadReportGeneralSalary()}}},$.ReportListDirector.Init()});