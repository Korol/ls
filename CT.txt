5 Клиентки -  Фото - при клике на фото - высплывает поп-ап:
    5.1. Вверху: фото (в размерах как сейчас открывается при клике), таблица: http://joxi.ru/nAy9zRWhY4V3zA
    5.2. Внизу:
        5.2.1. Отображаются сайты, за которыми закреплена клиентка, у сотрудника, который просматривает данную фото и выпадающий список (Есть, нет)
        (список сайтов - у сотрудника вкладка Работа, там есть сайты и привязка к ним клиентов. в списке только эти сайты)
        (здесь сотрудник отмечает, размещено ли данное фото в профиле клиентки на соответствующем сайте, или нет)
        5.2.2. Таблица:
            - колонки: id, имя,фото - подтягиваем с вкладки “Мужчины” (п.4)
            - отметка было отправлено либо нет (при клике на “отправил(а)” меняем запись на “отправлено” (можно чекбоксом, без возможности отменить)
            - комментарий, который можно заполнять
            - кнопочка сохранить в конце строки
            (нужна отдельная таблица: MenID(из п.4) | ImageID | Comment)
Права доступа к просмотру и редактированию данных о картинке:
Директора, Секретари и Переводчики (только те, за которыми закреплена эти Клиентка)
(8ч)

Под фото выводим (только для Директор+Секретарь+Переводчик(за которым закреплена Клиентка)):
1. Список Сайтов, за которыми закреплена Клиентка – с селектами «Есть/Нет» это фото в профиле на сайте:
    1.1. Если это Директор или Секретарь: выводим все сайты, за которыми закреплена Клиентка.
    1.2. Если это Переводчик: выводим только те сайты, за которыми эта Клиентка закреплена у этого Переводчика.
    1.3. Остальным: показываем всё как раньше.
    1.4. Данные сохраняем в отдельную таблицу «assol_image_site»:
        1.4.1. ID - id записи
        1.4.1. ImageID - id картинки (согласно «assol_images»)
        1.4.1. SiteID - id сайта (согласно «assol_sites»)

2. Таблицу со списком Мужчин, которые указаны для данной Клиентки во вкладке «Мужчины»:
    2.1. Для каждого мужчины в таблице есть чекбокс «Отправлено» - он показывает, было ли это фото отправлено этому мужчине.
    2.2. Чекбокс можно поставить только один раз – после этого он становится disabled и readonly.
    2.3. Также в таблице для каждого мужчины есть поле Комментарий, которое можно заполнить прямо в таблице.
    2.4. Под таблицей кнопка «Сохранить» – которая асинхронно сохраняет чекбоксы и Комментарии, без перезагрузки.
    2.5. Информация сохраняется в отдельной таблице «assol_image_men»:
        2.5.1. ID - id записи
        2.5.2. ImageID - id картинки (согласно «assol_images»)
        2.5.2. MenID - id мужчины (согласно «assol_customer_mens»)
        2.5.3. Comment - комментарий по данному фото для данного мужчины

Для этого функционала получаем асинхронно:
1. Список сайтов, за которыми закреплена Клиентка из «assol_customer_site»
+ данные по этим сайтам из новой таблицы «assol_image_site»:
    1.1. Директор+Секретарь: все такие сайты.
    1.2. Переводчик: те сайты, за которыми у него закреплена эта Клиентка.

2. Если массив сайтов НЕ пуст (значит, пользователь имеет право просматривать и редактировать инфу о картинке):

3. Список мужчин, указанных для этой Клиентки в «assol_customer_mens»
+ данные по этим мужчинам из новой таблицы «assol_image_men»:
    3.1. Получаем всю информацию для всех групп пользователей.

<div class="site-item">
    <span style="padding-left: 10px;">AFFA</span>
    <div class="arrow">
        <div class="arrow-in"></div>
    </div>
</div>
{{if Mens}}
                  <table class="table table-striped table-bordered" style="margin: 20px auto;">
                    <thead>
                      <tr>
                        <th>Id</th>
                        <th>Имя мужчины</th>
                        <th>Фото</th>
                        <th>Отправлено</th>
                        <th>Комментарий</th>
                      </tr>
                    </thead>
                    <tbody>
                      {{each Mens}}
                      <tr>
                        <td>${ID}</td>
                        <td>${Name}</td>
                        <td>${Name}</td>
                        <td>
                          <input type="checkbox" name="sended[${ID}]" value="1" id="sended_${ID}" />
                        </td>
                        <td>
                          <input type="text" name="comment[${ID}]" value="${Comment}" id="comment_${ID}" />
                        </td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                  <button class="btn btn-success">Сохранить</button>
                  {{/if}}
================================

6. Новости не скрываются, в зависимости от выбора клиентки (если сотрудник закреплен за клиенткой - он видит новость)
Вопрос:
    Какую роль играет “Категория”?
Ответ:
    Выбираем выбор кому показывать новость: всем кто закреплен за сайтом или всем кто закреплен за клиентками.
    Если выбраны два пункта то показываем всем кто закрпелен за сайтом/ами плюс выбраными клиентками
(2ч)

При создании новости есть 2 опции:
1. Категория:
    - Все новости - видят все сотрудники
    - Список сайтов - видят только сотрудники, закреплённые за выбранным сайтом
2. Клиентка:
    - Все клиентки - видят все сотрудники
    - Список клиенток - видят только сотрудники, закреплённые за выбранной клиенткой

Варианты показа новости:
1. Выбраны Все новости и Все клиентки – новость показывается всем.
2. Выбраны Категория(Сайт) и Все клиентки – новость показывается всем, кто закреплён за выбранным сайтом.
3. Выбраны Все новости и Клиентка(ФИО) – новость показывается всем, кто закреплён за выбранной клиенткой.
4. Выбраны Категория(Сайт) и Клиентка(ФИО) - новость показывается всем, кто закреплён за выбранным сайтом + всем, кто закреплён за выбранной клиенткой.

Проблема: не учитывается выбор Клиентки – новость не должны видеть те, кто за ней не закреплён.



<?php if(!empty($showNewModal)): ?>
<!-- Modal with carousel -->
<div class="modal fade" id="myModalAlbum_${ID}" tabindex="-1" role="dialog" aria-labelledby="myModalAlbum_${ID}Label">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <div id="carousel-example-generic-album_${ID}" class="carousel slide" data-ride="carousel" data-interval="false">
          <!-- Wrapper for slides -->
          <div class="carousel-inner" role="listbox">
            {{each images}}
                <div class="img-item item" id="mc_item_${ImageID}">
                  <img src="<?= base_url("thumb") ?>?src=/files/images/${ImageID}.${ext}" class="img-responsive mac-image">
                  {{if ToSites.length > 0}}
                    {{each ToSites}}
                    <div class="row mac-site-row">
                    <div class="col-md-3">
                        <div class="form-group work-sites-block mac-wsb">
                          <div class="site-item">
                            <span style="padding-left: 10px;">${SiteName}</span>
                            <div class="arrow">
                              <div class="arrow-in"></div>
                            </div>
                          </div>
                        </div>
                    </div>
                    <div class="col-md-1 col-md-offset-5 clearfix">
                      <span class="glyphicon glyphicon-ok mac-ok hidden pull-right" id="oksite_${SiteID}_${ImageID}" aria-hidden="true"></span>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                          <label for="Connect_${SiteID}_${ImageID}">В профайле</label>
                            <div class="btn-group assol-select-dropdown mac-asd" id="Connect_${SiteID}_${ImageID}">
                                <div class="label-placement-wrap">
                                    <button class="btn" data-label-placement>Выбрать</button>
                                </div>
                                <button data-toggle="dropdown" class="btn dropdown-toggle">
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li>
                                        <input type="radio" class="mac-radio" id="Connect_${SiteID}_${ImageID}_0" name="Connect[${SiteID}][${ImageID}]" ${SiteConnect == 0 ? 'checked=checked' : ''} value="0">
                                        <label for="Connect_${SiteID}_${ImageID}_0">
                                            <span class="data-label">Нет</span>
                                        </label>
                                    </li>
                                    <li>
                                        <input type="radio" class="mac-radio" id="Connect_${SiteID}_${ImageID}_1" name="Connect[${SiteID}][${ImageID}]" ${SiteConnect == 1 ? 'checked=checked' : ''} value="1">
                                        <label for="Connect_${SiteID}_${ImageID}_1">
                                            <span class="data-label">Есть</span>
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    </div>
                    {{/each}}
                  {{/if}}

                  {{if ToMens.length > 0}}
                  <table class="table table-striped table-bordered" style="margin: 20px auto;">
                    <thead>
                      <tr>
                        <th>Id</th>
                        <th>Имя мужчины</th>
                        <th>Фото</th>
                        <th>Отправлено</th>
                        <th>Комментарий</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      {{each ToMens}}
                      <tr>
                        <td>${MenID}</td>
                        <td>${MenName}</td>
                        <td>
                          <a href="<?= base_url("thumb") ?>/?src=/files/images/${MenPhoto}" data-lightbox="Men_Image_Photo_${ImageID}_Modal_${MenID}">
                            <img src="<?= base_url("thumb") ?>/?src=/files/images/${MenPhoto}&w=100" alt="avatar" class="mn-avatar">
                          </a>
                        </td>
                        <td>
                          <input type="checkbox" value="1" id="sended_${MenID}_${ImageID}" ${MenConnect > 0 ? 'checked=checked disabled=disabled' : ''} />
                        </td>
                        <td>
                          <textarea id="comment_${MenID}_${ImageID}" class="form-control" rows="2">${MenComment}</textarea>
                        </td>
                        <td class="clearfix" style="width: 100px;">
                          <span class="glyphicon glyphicon-ok mac-ok pull-left hidden" id="okmen_${MenID}_${ImageID}" aria-hidden="true"></span>
                          <button class="btn btn-success save-men-info pull-right" id="savemeninfo_${MenID}_${ImageID}" title="Сохранить изменения">
                            <span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>
                          </button>
                        </td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                  {{/if}}
                </div>
            {{/each}}
            <!-- Controls -->
              <a class="left carousel-control album-carousel" href="#carousel-example-generic-album_${ID}" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="right carousel-control album-carousel" href="#carousel-example-generic-album_${ID}" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            <!-- /Controls -->
          </div>
          <!-- /Wrapper for slides -->
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /Modal with carousel -->
                                        <?php endif; ?>